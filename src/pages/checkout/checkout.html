<ion-header>

  <ion-navbar color="primary">
    <ion-title>Shipping Details</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <ion-fab top right edge>
    <button ion-fab mini>${{amount}}</button>
    <ion-fab-list>
      <button ion-fab>
        <ion-icon name="logo-facebook"></ion-icon>
      </button>
      <button ion-fab>
        <ion-icon name="logo-twitter"></ion-icon>
      </button>
      <button ion-fab>
        <ion-icon name="logo-vimeo"></ion-icon>
      </button>
      <button ion-fab>
        <ion-icon name="logo-googleplus"></ion-icon>
      </button>
    </ion-fab-list>
  </ion-fab>



  <ion-card>
    <ion-card-header style="text-align:center;" (click)="populateForm()">
      <strong>Confirm Purchase</strong>
    </ion-card-header>
    <hr/>
    <ion-list>
      <ion-row>

        <ion-col col-6x>
          <ion-item>
            <ion-label floating>Full Name</ion-label>
            <ion-input [(ngModel)]="cardinfo.name" type="text" name="name" class="form-control" required minlength="4" #name="ngModel"></ion-input>
          </ion-item>

          <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert alert-danger">
            <div *ngIf="name.errors.required">
              Name is required.
            </div>
            <div *ngIf="name.errors.minlength">
              Name must be at least 4 characters long.
            </div>
          </div>
        </ion-col>
        <ion-col col-6>
          <ion-item>
            <ion-label floating>Email:</ion-label>
            <ion-input [(ngModel)]="cardinfo.email" type="email" name="email" class="form-control" required  #email="ngModel"  email="true"></ion-input>
          </ion-item>
            <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger">
              <!-- <div *ngIf="email.errors.required">
                Email is required.
              </div> -->
              <div *ngIf="email.errors">
                Valid email is required.
              </div>
            </div>
        </ion-col>
      </ion-row>

      <ion-item>
        <ion-label floating>Address</ion-label>
        <ion-input [(ngModel)]="cardinfo.address_line1" type="text" name="address" class="form-control" required minlength="6" #address="ngModel"></ion-input>
      </ion-item>
      <div *ngIf="address.invalid && (address.dirty || address.touched)" class="alert alert-danger">
          <div *ngIf="address.errors.required">
            Address is required.
          </div>
          <div *ngIf="address.errors.minlength">
            Address must be at least 6 characters long.
          </div>
        </div>

      <ion-item>
        <ion-label floating>City</ion-label>
        <ion-input [(ngModel)]="cardinfo.address_city" type="text" name="city" class="form-control" required  #city="ngModel"></ion-input>
      </ion-item>
      <div *ngIf="city.invalid && (city.dirty || city.touched)" class="alert alert-danger">
          <div *ngIf="city.errors.required">
            City is required.
          </div>
          
        </div>

      <div *ngIf="showSpinner" style="text-align: center">
        <ion-spinner name="bubbles"></ion-spinner>

      </div>
      <ion-row>

        <ion-col col-8>
          <ion-item>
            <ion-select [(ngModel)]="cardinfo.address_state" name="state" class="form-control" required  #state="ngModel">
              <ion-option value="AL">AL</ion-option>
              <ion-option value="AK">AK</ion-option>
              <ion-option value="AR">AR</ion-option>
              <ion-option value="AZ">AZ</ion-option>
              <ion-option value="CA">CA</ion-option>
              <ion-option value="CO">CO</ion-option>
              <ion-option value="CT">CT</ion-option>
              <ion-option value="DC">DC</ion-option>
              <ion-option value="DE">DE</ion-option>
              <ion-option value="FL">FL</ion-option>
              <ion-option value="GA">GA</ion-option>
              <ion-option value="HI">HI</ion-option>
              <ion-option value="IA">IA</ion-option>
              <ion-option value="ID">ID</ion-option>
              <ion-option value="IL">IL</ion-option>
              <ion-option value="IN">IN</ion-option>
              <ion-option value="KS">KS</ion-option>
              <ion-option value="KY">KY</ion-option>
              <ion-option value="LA">LA</ion-option>
              <ion-option value="MA">MA</ion-option>
              <ion-option value="MD">MD</ion-option>
              <ion-option value="ME">ME</ion-option>
              <ion-option value="MI">MI</ion-option>
              <ion-option value="MN">MN</ion-option>
              <ion-option value="MO">MO</ion-option>
              <ion-option value="MS">MS</ion-option>
              <ion-option value="MT">MT</ion-option>
              <ion-option value="NC">NC</ion-option>
              <ion-option value="NE">NE</ion-option>
              <ion-option value="NH">NH</ion-option>
              <ion-option value="NJ">NJ</ion-option>
              <ion-option value="NM">NM</ion-option>
              <ion-option value="NV">NV</ion-option>
              <ion-option value="NY">NY</ion-option>
              <ion-option value="ND">ND</ion-option>
              <ion-option value="OH">OH</ion-option>
              <ion-option value="OK">OK</ion-option>
              <ion-option value="OR">OR</ion-option>
              <ion-option value="PA">PA</ion-option>
              <ion-option value="RI">RI</ion-option>
              <ion-option value="SC">SC</ion-option>
              <ion-option value="SD">SD</ion-option>
              <ion-option value="TN">TN</ion-option>
              <ion-option value="TX">TX</ion-option>
              <ion-option value="UT">UT</ion-option>
              <ion-option value="VT">VT</ion-option>
              <ion-option value="VA">VA</ion-option>
              <ion-option value="WA">WA</ion-option>
              <ion-option value="WI">WI</ion-option>
              <ion-option value="WV">WV</ion-option>
              <ion-option value="WY">WY</ion-option>
            </ion-select>
          </ion-item>
          <div *ngIf="state.invalid && (state.dirty || state.touched)" class="alert alert-danger">
              <div *ngIf="state.errors.required">
                State is required.
              </div>
              
            </div>
        </ion-col>
        <ion-col col-4>
          <ion-item>
            <ion-label floating>Zip</ion-label>
            <ion-input [(ngModel)]="cardinfo.postalCode" type="text" name="zio" class="form-control" required  #zip="ngModel"></ion-input>
          </ion-item>
          <div *ngIf="zip.invalid && (zip.dirty || zip.touched)" class="alert alert-danger">
              <div *ngIf="zip.errors.required">
                Zip is required.
              </div>
              
            </div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-9>
          <ion-item>

            <ion-label floating>Card Number</ion-label>
            <ion-input [(ngModel)]="cardinfo.number" type="text" name="card" class="form-control" required minlength="16" #card="ngModel"></ion-input>
          </ion-item>
          <div *ngIf="card.invalid && (card.dirty || card.touched)" class="alert alert-danger">
              <div *ngIf="card.errors.required">
                Card number is required.
              </div>
              <div *ngIf="card.errors.minlength">
                  Card number must be at least 16 characters long.
              </div>
            </div>
        </ion-col>

        <ion-col col-3>
          <ion-item>
            <ion-label floating>CVV</ion-label>
            <ion-input [(ngModel)]="cardinfo.cvc" type="text" name="cvv" class="form-control" required minlength="3" #cvv="ngModel"></ion-input>
          </ion-item>
          <div *ngIf="cvv.invalid && (cvv.dirty || cvv.touched)" class="alert alert-danger">
              <div *ngIf="cvv.errors.required">
                CVV number is required.
              </div>
              <div *ngIf="cvv.errors.minlength">
                  CVV number must be at least 3 characters long.
              </div>
            </div>
        </ion-col>
      </ion-row>








      <ion-row>


        <ion-col col-8>
          <ion-item>
            <ion-select [(ngModel)]="cardinfo.expMonth" name="cardMonth" class="form-control" required  #cardMonth="ngModel">
              <ion-option value="01">Jan</ion-option>
              <ion-option value="02">Feb</ion-option>
              <ion-option value="03">Mar</ion-option>
              <ion-option value="04">Apr</ion-option>
              <ion-option value="05">May</ion-option>
              <ion-option value="06">Jun</ion-option>
              <ion-option value="07">Jul</ion-option>
              <ion-option value="08">Aug</ion-option>
              <ion-option value="09">Sep</ion-option>
              <ion-option value="10">Oct</ion-option>
              <ion-option value="11">Nov</ion-option>
              <ion-option value="12" checked="true">Dec</ion-option>
            </ion-select>
            <ion-select [(ngModel)]="cardinfo.expYear" name="cardYear" class="form-control" required  #cardYear="ngModel">
              <ion-option>2022</ion-option>
              <ion-option>2021</ion-option>
              <ion-option checked="true">2020</ion-option>
              <ion-option>2019</ion-option>
              <ion-option>2018</ion-option>

            </ion-select>
          </ion-item>
          <div *ngIf="cardMonth.invalid && (cardMonth.dirty || cardMonth.touched)" class="alert alert-danger">
              <div *ngIf="cardMonth.errors.required">
                Card month is required.
              </div>
            </div>
            <div *ngIf="cardYear.invalid && (cardYear.dirty || cardYear.touched)" class="alert alert-danger">
                <div *ngIf="cardYear.errors.required">
                  Card year is required.
                </div>
              </div>
        </ion-col>
        <ion-col col-4>
          <ion-row>
            <ion-col>
              <img src="https://cdn1.iconfinder.com/data/icons/credit-card-icons/512/visa.png" />
            </ion-col>
            <ion-col>
              <img src="http://icons.iconarchive.com/icons/designbolts/credit-card-payment/256/Master-Card-Blue-icon.png" />
            </ion-col>
            <ion-col>
              <img src="http://files.softicons.com/download/business-icons/credit-cards-icon-set-by-yootheme/png/256x256/amex.png" />
            </ion-col>
          </ion-row>

        </ion-col>
      </ion-row>


    </ion-list>
  </ion-card>
  <button block ion-button (click)="showConfirm()" [disabled]="name.invalid || email.invalid || address.invalid || city.invalid ||
                                                              state.invalid || zip.invalid || card.invalid || cvv.invalid || cardMonth.invalid || cardYear.invalid || showSpinner"> Checkout </button>
</ion-content>